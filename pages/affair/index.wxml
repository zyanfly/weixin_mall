<view>
  <block wx:for="{{affairs}}" wx:key="">
    <view class="affair_container">
      <v-affair basic="{{basic}}" product="{{item}}" isDetail="{{false}}" />
      <!-- 放置基本信息 -->
      <!-- <view class="header">
        <image class="header_pic" src="{{basic.avatar}}"></image>
        <view class="name_time">
          <text class="name">{{basic.name}}</text>
          <text class="time">{{item.updated_at}}</text>
        </view>
      </view> -->
      <!-- 介绍 -->
      <!-- <view bind:tap="tapContent" data-id="{{item.id}}" class="introduce">
        <text>{{item.content}}</text>
      </view> -->
      <!-- 放置图片 -->
      <!-- <view class="banner {{item.affair_images.length===1?'one':item.affair_images.length===2?'two':'nomal'}}">
        <view wx:for="{{item.affair_images}}" wx:for-item="imgItem" wx:key="index" class="prodpic_wrap">
          <image class="pic" src="{{imgItem.pic}}" mode="aspectFill" data-url="{{imgItem.pic}}" data-id="{{item.id}}" bind:tap="showImage" />
        </view>
      </view> -->
      <!-- 放置商品 -->
      <!-- <view wx:if="{{item.product}}" class="product" data-id="{{item.product.id}}" bind:tap="tapProduct">
        <view class="p_left">
          <image class="p_pic" src="{{item.product.pic}}"></image>
          <view class="p_name_price">
            <view class="p_name">{{item.product.name}}</view>
            <view class="p_price">¥{{item.product.current_price}}</view>
          </view>
        </view>
        <view class="buy">立即购买</view>
      </view> -->
      <!-- 放置点赞、评论、分享数量，点赞功能暂时未设计(我来设计), 分享功能你来设计 -->
      <view class="comments">
        <view class="c_title">
          <view class="c_title_left">浏览100次</view>
          <view class="c_title_right">
            <v-like like="{{false}}" count="{{item.affair_likes_count}}" readOnly="{{true}}" class="like" />
            <v-share count="{{item.affair_shares_count}}" />
          </view>
        </view>
        <!-- 放置评论, 评论至多显示三条，如果多余三条就显示更多，查看跳转到affair_detail -->
        <view data-id="{{item.id}}" class="comments" bind:tap="tapContent">
          <view class="c_item">
            <text class="c_name">jay共1人觉得很赞></text>
          </view>
          <view class="c_item" wx:for="{{item.affair_comments}}" wx:key="index" wx:if="{{index<3}}">
            <text class="c_name">{{item.guest.nickname}}:</text>
            <text>{{item.content}}</text>
          </view>
          <view class="c_item" wx:if="{{item.affair_comments.length>3}}">
            <text class="c_name">查看全部{{item.affair_comments.length}}条评论</text>
          </view>
        </view>
        <!-- 评论 -->
        <button class="remark" wx:if="{{!authorized}}" open-type="getUserInfo" bindgetuserinfo="onGetUserInfo">
          评论
        </button>
        <button class="remark" data-affair_id="{{item.id}}" data-from="affairs" wx:if="{{authorized}}" bind:tap="affairComment">
          评论
        </button>
      </view>
    </view>
  </block>
</view>
<v-support />
<v-loading class="loading-center" wx:if="{{false}}" />
