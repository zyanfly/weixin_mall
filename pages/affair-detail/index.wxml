<view>
  <view class="affair_container">
    <!-- 商品展示 -->
    <v-affair product="{{affair}}" isDetail="{{true}}" basic="{{basic}}" />
    <!-- 评论 -->
    <view class="comments">
      <view class="c_tab">
        <view class="c_tab_left">
          <view class="comment {{currentTab==0?'active':''}}" data-index="0" bind:tap="switch">
            评论<text>{{affair.affair_comments_count}}</text>
          </view>
          <view class="like {{currentTab==1?'active':''}}" data-index="1" bind:tap="switch">
            点赞<text>{{affair.affair_likes_count}}</text>
          </view>
        </view>
        <view class="share {{currentTab==2?'active':''}}" data-index="2" bind:tap="switch">
          转发<text>{{affair.affair_shares_count}}</text>
        </view>
      </view>
      <view class="c_items">
        <view hidden="{{currentTab!=0}}">

        </view>
        <view hidden="{{currentTab!=1}}">

        </view>
        <view hidden="{{currentTab!=2}}">

        </view>
      </view>
    </view>
    <!-- <view>评论列表{{affair_comments_count}}</view> -->
    <!-- <block wx:for="{{affair_comments}}" wx:key="">
      <view>
        <text>{{item.guest.nickname}}</text>
        <text>{{item.guest.gender}}</text>
        <text>{{item.created_at}}</text>
        <image class="pic" src="{{item.guest.avatar}}" />
        <text>{{item.content}}</text>
        <text bind:tap="deleteAffairComment" data-affair_comment_id="{{item.id}}" wx:if="{{authorized}}">
          删除
        </text>
      </view>
    </block> -->
    <!-- 点赞列表 -->
    <!-- <view>点赞列表{{affair_likes_count}}</view>
    <block wx:for="{{affair_likes}}" wx:key="">
      <text>{{item.guest.nickname}}</text>
      <text>{{item.guest.gender}}</text>
      <text>{{item.created_at}}</text>
      <image class="pic" src="{{item.guest.avatar}}" />
    </block>
    <view>转发列表{{affair_shares_count}}</view>
    <block wx:for="{{affair_shares}}" wx:key="">
      <text>{{item.guest.nickname}}</text>
      <text>{{item.guest.gender}}</text>
      <text>{{item.created_at}}</text>
      <image class="pic" src="{{item.guest.avatar}}" />
    </block> -->
  </view>
</view>
<button bind:tap="affairComment" data-affair_id="{{affair.id}}" data-from="affair_detail" wx:if="{{authorized}}" class="submit">
  评论
</button>
<button wx:if="{{!authorized}}" open-type="getUserInfo" bind:getuserinfo="onGetUserInfo" class="submit">
  评论(未登录)
</button>
<view wx:if="{{authorized}}">
  <button form-type="submit" wx:if="{{!like_status}}" data-affair_id="{{affair.id}}" bind:tap="addAffairLike">
    点赞
  </button>
  <button form-type="submit" wx:if="{{like_status}}" data-affair_id="{{affair.id}}" bind:tap="deleteAffairLike">
    取消点赞
  </button>
</view>
<button wx:if="{{!authorized}}" open-type="getUserInfo" bind:getuserinfo="onGetUserInfo" class="submit">
  点赞(未登录)
</button>
<!-- 未验证未登录的情况 -->
<button form-type="submit" data-affair_id="{{affair.id}}" bind:tap="addAffairShare">分享</button>
<v-support />
<v-loading class="loading-center" wx:if="{{false}}" />
